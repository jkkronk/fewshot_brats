[Brats17_TCIA_141_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_3e1_10steps_2fch2sh_DCS_muchaug_1_300
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Loading train set for subj
0.0 : 0.19417430254085408
0.01 : 0.2451195180157271
0.02 : 0.2624260884354493
0.03 : 0.23340834541154934
0.04 : 0.18020458007883344
0.05 : 0.13161295172938758
0.06 : 0.09477071850317435
0.07 : 0.06747752395797886
0.08 : 0.047151929541250776
0.09 : 0.0325503692465717
0.1 : 0.0206399845320959
0.11 : 0.011825227561876548
0.12 : 0.007613455414012739
0.13 : 0.006533939488948112
0.14 : 0.005785847992285536
0.15 : 0.005218369164871404
0.16 : 0.004629366118352402
0.17 : 0.004151557150361046
0.18 : 0.003722744194291792
0.19 : 0.003457643862682144
0.2 : 0.00312917672247243
0.21 : 0.0028004815307609452
0.22 : 0.00244628937195006
0.23 : 0.002243914807302231
0.24 : 0.0019527535092502186
0.25 : 0.0016107450647151705
0.26 : 0.0013192863168443685
0.27 : 0.001065739642342851
0.28 : 0.0008882234262584223
0.29 : 0.0005837859789837047
0.3 : 0.000317323314378554
0.31 : 0.00015233162594969249
0.32 : 6.347473388217821e-05
0.33 : 1.269543027987076e-05
0.34 : 0.0
0.35 : 0.0
AUC training :  0.6460660420351847  - Dice training :  0.2624260884354493
0.02
0.0
Loading test set for subj
Subject  Brats17_CBICA_AMH_1_t2_unbiased.nii.gz  Number of Slices:  140
AUC :  0.7394640374559649
DCS:  0.25770097342229026
0.02
Loading test set for subj
Subject  Brats17_TCIA_645_1_t2_unbiased.nii.gz  Number of Slices:  134
AUC :  0.7356012676371215
DCS:  0.14196734831297558
0.04
Loading test set for subj
Subject  Brats17_2013_3_1_t2_unbiased.nii.gz  Number of Slices:  128
AUC :  0.7055066181186302
DCS:  0.20968017494703753
0.06
Loading test set for subj
Subject  Brats17_TCIA_331_1_t2_unbiased.nii.gz  Number of Slices:  123
AUC :  0.7013906807019165
DCS:  0.1565674289367798
0.08
Loading test set for subj
Subject  Brats17_TCIA_147_1_t2_unbiased.nii.gz  Number of Slices:  136
AUC :  0.7199660755531103
DCS:  0.35509702955782374
0.1
Loading test set for subj
Subject  Brats17_TCIA_261_1_t2_unbiased.nii.gz  Number of Slices:  125
AUC :  0.6600201487563374
DCS:  0.20786088524159171
0.12
Loading test set for subj
Subject  Brats17_TCIA_410_1_t2_unbiased.nii.gz  Number of Slices:  129
AUC :  0.6302079603578521
DCS:  0.2681392933584236
0.14
Loading test set for subj
Subject  Brats17_CBICA_ALX_1_t2_unbiased.nii.gz  Number of Slices:  137
AUC :  0.6335604471372264
DCS:  0.13465847096103958
0.16
Loading test set for subj
Subject  Brats17_TCIA_390_1_t2_unbiased.nii.gz  Number of Slices:  138
AUC :  0.6362133047160946
DCS:  0.24322084316340137
0.18
Loading test set for subj
Subject  Brats17_TCIA_653_1_t2_unbiased.nii.gz  Number of Slices:  138
AUC :  0.6433562510599475
DCS:  0.14632488701108934
0.2
Loading test set for subj
Subject  Brats17_CBICA_AOP_1_t2_unbiased.nii.gz  Number of Slices:  146
AUC :  0.6328611164652247
DCS:  0.06625810910155641
0.22
Loading test set for subj
Subject  Brats17_CBICA_AWH_1_t2_unbiased.nii.gz  Number of Slices:  130
AUC :  0.6456747046488006
DCS:  0.3738948484057372
0.24
Loading test set for subj
Subject  Brats17_TCIA_449_1_t2_unbiased.nii.gz  Number of Slices:  131
AUC :  0.6471698027649956
DCS:  0.10092239472553585
0.26
Loading test set for subj
Subject  Brats17_TCIA_460_1_t2_unbiased.nii.gz  Number of Slices:  134
AUC :  0.6586505191538673
DCS:  0.344299299822343
0.28
Loading test set for subj
Subject  Brats17_TCIA_401_1_t2_unbiased.nii.gz  Number of Slices:  138
AUC :  0.6657459301071789
DCS:  0.3599186068883444
0.3
Loading test set for subj
Subject  Brats17_TCIA_634_1_t2_unbiased.nii.gz  Number of Slices:  139
AUC :  0.6718542934610763
DCS:  0.3022450769062146
0.32
Loading test set for subj
Subject  Brats17_TCIA_615_1_t2_unbiased.nii.gz  Number of Slices:  136
AUC :  0.6772493728172665
DCS:  0.2873233627457076
0.34
Loading test set for subj
Subject  Brats17_TCIA_242_1_t2_unbiased.nii.gz  Number of Slices:  127
AUC :  0.6819288336053776
DCS:  0.325712913563752
0.36
Loading test set for subj
Subject  Brats17_TCIA_179_1_t2_unbiased.nii.gz  Number of Slices:  131
AUC :  0.6816406752209164
DCS:  0.15393238523547778
0.38
Loading test set for subj
Subject  Brats17_TCIA_298_1_t2_unbiased.nii.gz  Number of Slices:  132
AUC :  0.6914813684433057
DCS:  0.36315338874599973
0.4
Loading test set for subj
Subject  Brats17_TCIA_199_1_t2_unbiased.nii.gz  Number of Slices:  139
AUC :  0.6987272380480952
DCS:  0.38508510411402236
0.42
Loading test set for subj
Subject  Brats17_2013_18_1_t2_unbiased.nii.gz  Number of Slices:  138
AUC :  0.7090502858493886
DCS:  0.38673500470155087
0.44
Loading test set for subj
Subject  Brats17_TCIA_168_1_t2_unbiased.nii.gz  Number of Slices:  144
AUC :  0.7159995928632711
DCS:  0.3352427130100234
0.46
Loading test set for subj
Subject  Brats17_TCIA_103_1_t2_unbiased.nii.gz  Number of Slices:  128
AUC :  0.7080559110436444
DCS:  0.27029975775283394
0.48
Loading test set for subj
Subject  Brats17_TCIA_346_1_t2_unbiased.nii.gz  Number of Slices:  140
AUC :  0.7105992036015083
DCS:  0.2654568534218355
0.5
Loading test set for subj
Subject  Brats17_TCIA_470_1_t2_unbiased.nii.gz  Number of Slices:  134
AUC :  0.7093087694553376
DCS:  0.044916769542353296
0.52
Loading test set for subj
Subject  Brats17_CBICA_AXJ_1_t2_unbiased.nii.gz  Number of Slices:  138
AUC :  0.7147428747418876
DCS:  0.39286450446414806
0.54
Loading test set for subj
Subject  Brats17_2013_15_1_t2_unbiased.nii.gz  Number of Slices:  129
AUC :  0.7159259087823169
DCS:  0.12205197405650112
0.56
Loading test set for subj
Subject  Brats17_TCIA_491_1_t2_unbiased.nii.gz  Number of Slices:  134
AUC :  0.7151744791304432
DCS:  0.2691319533611353
0.58
Loading test set for subj
Subject  Brats17_2013_29_1_t2_unbiased.nii.gz  Number of Slices:  134
AUC :  0.7163436610012296
DCS:  0.17438405187031472
0.6
Loading test set for subj
Subject  Brats17_CBICA_AQG_1_t2_unbiased.nii.gz  Number of Slices:  140
AUC :  0.712548828966282
DCS:  0.13300560856255447
0.62
Loading test set for subj
Subject  Brats17_2013_0_1_t2_unbiased.nii.gz  Number of Slices:  127
AUC :  0.7151006241768401
DCS:  0.20746002358391477
0.64
Loading test set for subj
Subject  Brats17_TCIA_205_1_t2_unbiased.nii.gz  Number of Slices:  136
AUC :  0.7174259256740518
DCS:  0.3457850497487155
0.66
Loading test set for subj
Subject  Brats17_TCIA_177_1_t2_unbiased.nii.gz  Number of Slices:  124
AUC :  0.7165613416146435
DCS:  0.06062617605413262
0.68
Loading test set for subj
Subject  Brats17_TCIA_413_1_t2_unbiased.nii.gz  Number of Slices:  137
AUC :  0.7144790197955314
DCS:  0.11419711510706324
0.7
Loading test set for subj
Subject  Brats17_CBICA_ASU_1_t2_unbiased.nii.gz  Number of Slices:  134
AUC :  0.7109612585536658
DCS:  0.07922623156925805
0.72
Loading test set for subj
Subject  Brats17_TCIA_630_1_t2_unbiased.nii.gz  Number of Slices:  133
AUC :  0.7129281337151554
DCS:  0.20113690959952224
0.74
Loading test set for subj
Subject  Brats17_CBICA_ABO_1_t2_unbiased.nii.gz  Number of Slices:  144
AUC :  0.7075379689950264
DCS:  0.23735307507340517
0.76
Loading test set for subj
Subject  Brats17_2013_13_1_t2_unbiased.nii.gz  Number of Slices:  136
AUC :  0.7062882864407946
DCS:  0.029822891658269745
0.78
Loading test set for subj
Subject  Brats17_TCIA_607_1_t2_unbiased.nii.gz  Number of Slices:  137
AUC :  0.7064598619471881
DCS:  0.15981086716024168
0.8
Loading test set for subj
Subject  Brats17_TCIA_402_1_t2_unbiased.nii.gz  Number of Slices:  142
AUC :  0.7130232108041786
DCS:  0.41040023288342337
0.82
Loading test set for subj
Subject  Brats17_TCIA_131_1_t2_unbiased.nii.gz  Number of Slices:  130
AUC :  0.7129444629044037
DCS:  0.1059336249658371
0.84
Loading test set for subj
Subject  Brats17_TCIA_374_1_t2_unbiased.nii.gz  Number of Slices:  137
AUC :  0.7148846608500066
DCS:  0.3001160450243176
0.86
Loading test set for subj
Subject  Brats17_TCIA_603_1_t2_unbiased.nii.gz  Number of Slices:  147
AUC :  0.7169147215837489
DCS:  0.3234832709768801
0.88
Loading test set for subj
Subject  Brats17_TCIA_101_1_t2_unbiased.nii.gz  Number of Slices:  135
AUC :  0.7162705246534606
DCS:  0.03510853223078369
0.9
Loading test set for subj
Subject  Brats17_TCIA_448_1_t2_unbiased.nii.gz  Number of Slices:  127
AUC :  0.7134124010834844
DCS:  0.09564011836033687
0.92
Loading test set for subj
Subject  Brats17_TCIA_621_1_t2_unbiased.nii.gz  Number of Slices:  145
AUC :  0.7146565973347779
DCS:  0.17232867050664158
0.94
Loading test set for subj
Subject  Brats17_TCIA_234_1_t2_unbiased.nii.gz  Number of Slices:  133
AUC :  0.7151618895460479
DCS:  0.19180552589453087
0.96
Loading test set for subj
Subject  Brats17_TCIA_130_1_t2_unbiased.nii.gz  Number of Slices:  130
AUC :  0.7153219039209172
DCS:  0.09361012250790636
0.98
Loading test set for subj
Subject  Brats17_CBICA_AME_1_t2_unbiased.nii.gz  Number of Slices:  144
AUC :  0.7165869813205079
DCS:  0.2036176275136321
All AUC:  0.7165869813205079
Mean All DCS:  0.21891028252658412
Std ALL DCS:  0.10887766450746786
[Brats17_TCIA_141_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_3e1_10steps_2fch2sh_DCS_muchaug_1_300
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Healthy!
Traceback (most recent call last):
  File "/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/h5py/_hl/files.py", line 162, in make_fid
    fid = h5f.open(name, h5f.ACC_RDWR, fapl=fapl)
  File "h5py/_objects.pyx", line 54, in h5py._objects.with_phil.wrapper
  File "h5py/_objects.pyx", line 55, in h5py._objects.with_phil.wrapper
  File "h5py/h5f.pyx", line 78, in h5py.h5f.open
OSError: Unable to open file (unable to lock file, errno = 11, error message = 'Resource temporarily unavailable')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/h5py/_hl/files.py", line 165, in make_fid
    fid = h5f.open(name, h5f.ACC_RDONLY, fapl=fapl)
  File "h5py/_objects.pyx", line 54, in h5py._objects.with_phil.wrapper
  File "h5py/_objects.pyx", line 55, in h5py._objects.with_phil.wrapper
  File "h5py/h5f.pyx", line 78, in h5py.h5f.open
OSError: Unable to open file (unable to lock file, errno = 11, error message = 'Resource temporarily unavailable')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "restore_MAP_NN.py", line 84, in <module>
    step_size=step_rate, renormalized=False)
  File "/scratch_net/biwidl214/jonatank/code_home/restor_MAP/utils/threshold.py", line 236, in compute_threshold
    data = h5py.File('/scratch_net/biwidl214/jonatank/data/dataset_abnormal/new/camcan/camcan_t2_train_set.hdf5')
  File "/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/h5py/_hl/files.py", line 312, in __init__
    fid = make_fid(name, mode, userblock_size, fapl, swmr=swmr)
  File "/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/h5py/_hl/files.py", line 167, in make_fid
    fid = h5f.create(name, h5f.ACC_EXCL, fapl=fapl, fcpl=fcpl)
  File "h5py/_objects.pyx", line 54, in h5py._objects.with_phil.wrapper
  File "h5py/_objects.pyx", line 55, in h5py._objects.with_phil.wrapper
  File "h5py/h5f.pyx", line 98, in h5py.h5f.create
OSError: Unable to create file (unable to open file: name = '/scratch_net/biwidl214/jonatank/data/dataset_abnormal/new/camcan/camcan_t2_train_set.hdf5', errno = 17, error message = 'File exists', flags = 15, o_flags = c2)
