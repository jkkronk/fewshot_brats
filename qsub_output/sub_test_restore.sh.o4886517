[Brats17_TCIA_425_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_1e1_10steps_4fch3sh_iterAug_EX100_3_200
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Loading train set for subj
0.0 : 0.028469666847100922
0.01 : 0.30227983033820743
0.02 : 0.3895701686047071
0.03 : 0.4566423636385332
0.04 : 0.5063965137948911
0.05 : 0.5409960714738309
0.06 : 0.55870644148647
0.07 : 0.5617730455413461
0.08 : 0.5525590012421314
0.09 : 0.5294104209973274
0.1 : 0.4952634039516744
0.11 : 0.46473159368702066
0.12 : 0.43875917646409446
0.13 : 0.4139446146730647
0.14 : 0.388671286532088
0.15 : 0.36233380259659
0.16 : 0.33750282814570604
0.17 : 0.31045991589346505
0.18 : 0.2839366126980853
0.19 : 0.2568833280316686
0.2 : 0.23140015968643393
0.21 : 0.20572364258866435
0.22 : 0.1852527556062334
0.23 : 0.16214748438651616
0.24 : 0.1419222581408184
0.25 : 0.12380115089514068
0.26 : 0.10763818689094659
0.27 : 0.09334422213148222
0.28 : 0.08085299081964514
0.29 : 0.06822426028136283
0.3 : 0.05754432920709267
0.31 : 0.04674077817079333
0.32 : 0.040767994586822294
0.33 : 0.03807181922245305
0.34 : 0.035861482897811776
0.35 : 0.032886048988285406
0.36 : 0.03048285872860009
0.37 : 0.027907374909044214
0.38 : 0.025639926253054925
0.39 : 0.023282787061299885
0.4 : 0.021172217918925894
0.41 : 0.019044336248868973
0.42 : 0.01665659791145249
0.43 : 0.015551427707460364
0.44 : 0.014014446991651887
0.45 : 0.012813298125622267
0.46 : 0.011094738666897808
0.47 : 0.00989068193649141
0.48 : 0.00851063829787234
0.49 : 0.007299904406013731
0.5 : 0.006261958601495912
0.51 : 0.005134899912967798
0.52 : 0.00418027433050294
0.53 : 0.002876318312559924
0.54 : 0.002179979072200907
0.55 : 0.0014830323650004361
0.56 : 0.0010471204188481674
0.57 : 0.00026190580121349685
0.58 : 8.730955603090758e-05
AUC training :  0.977760749774051  - Dice training :  0.5617730455413461
0 15424
1 20000
2 2528
3 12192
4 11456
5 1472
6 15200
7 4928
8 4064
9 21056
10 15744
11 18496
12 6656
13 19744
14 5888
15 2912
16 704
17 2944
18 1632
19 20064
20 10208
21 14752
22 23008
23 9088
24 8128
25 12064
26 9632
27 19552
28 512
29 16704
30 7968
31 8000
32 1856
33 7552
34 8896
35 736
36 10400
37 17696
38 15680
39 992
40 3072
41 23424
Traceback (most recent call last):
  File "restore_MAP_NN.py", line 78, in <module>
    step_size=step_rate, renormalized=False)
  File "/scratch_net/biwidl214/jonatank/code_home/restor_MAP/utils/threshold.py", line 330, in compute_threshold
    dif_prob.extend(prob_map[mask == 1])
IndexError: boolean index did not match indexed array along dimension 0; dimension is 32 but corresponding boolean dimension is 17
[Brats17_TCIA_606_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_1e1_10steps_4fch3sh_iterAug_EX100_0_200
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Loading train set for subj
0.0 : 0.16800585284519326
0.01 : 0.639360020555692
0.02 : 0.6953780066362847
0.03 : 0.708047835227255
0.04 : 0.689832331452559
0.05 : 0.646335299073294
0.06 : 0.589332741591757
0.07 : 0.5243055713022381
0.08 : 0.45511049723756913
0.09 : 0.38563297715606143
0.1 : 0.3203063714808681
0.11 : 0.2618652165999272
0.12 : 0.21051390019225552
0.13 : 0.17106930440950896
0.14 : 0.14175742574257424
0.15 : 0.11847268336854815
0.16 : 0.09976634175224586
0.17 : 0.0861840667463715
0.18 : 0.07484787412596475
0.19 : 0.06431229192506038
0.2 : 0.054975954589651266
0.21 : 0.046582619727243896
0.22 : 0.03866845551998512
0.23 : 0.03220880373968885
0.24 : 0.025522057297420343
0.25 : 0.019815547480066902
0.26 : 0.014629809246686065
0.27 : 0.010289232763509681
0.28 : 0.006575342465753425
0.29 : 0.0033878781719009388
0.3 : 0.001302365964836119
0.31 : 0.00042074689359853956
0.32 : 8.144980655670943e-05
0.33 : 1.3575520621215824e-05
0.34 : 0.0
0.35 : 0.0
0.36 : 0.0
0.37 : 0.0
AUC training :  0.9705172803728247  - Dice training :  0.708047835227255
0 19008
1 16576
2 7488
3 15936
4 6976
5 16064
6 20896
7 9216
8 3808
9 21888
10 13120
11 9376
12 4896
13 19072
14 19712
15 12352
16 5472
17 768
18 16032
19 11360
20 13280
21 2208
22 8288
23 10784
24 16384
25 5248
26 17696
27 22816
28 22528
29 17056
30 1568
31 8896
32 17952
33 18656
34 11232
35 2368
36 10912
37 20512
38 4832
39 18880
40 20480
41 15776
42 10304
43 288
44 10208
45 14272
46 7008
47 10176
48 19872
49 11680
0 2560
1 11680
2 2400
3 20480
4 288
5 11488
6 18432
7 16160
8 4288
9 8512
10 448
11 2048
12 13856
13 22112
14 7520
15 10368
16 21248
17 14880
18 11584
19 20640
20 20576
21 14112
22 14496
23 3616
24 7776
25 12768
26 3872
27 17440
28 16384
29 21056
30 6720
31 19712
32 6848
33 6080
34 9824
35 13632
36 3008
37 13696
38 13760
39 3264
40 18208
41 14848
42 5984
43 18112
44 1856
45 20928
46 992
47 19936
48 9440
49 4672
0.03 0.024995561191604176 0.030385108115089578
0.0
Loading test set for subj
Subject  Brats17_CBICA_AMH_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.6502886631402177
0.02
Loading test set for subj
Subject  Brats17_TCIA_645_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.43547036460165134
0.04
Loading test set for subj
Subject  Brats17_2013_3_1_t2_unbiased.nii.gz  Number of Slices:  128
DCS:  0.45536707802768256
0.06
Loading test set for subj
Subject  Brats17_TCIA_331_1_t2_unbiased.nii.gz  Number of Slices:  123
DCS:  0.6229100292266779
0.08
Loading test set for subj
Subject  Brats17_TCIA_147_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.5761157901303887
0.1
Loading test set for subj
Subject  Brats17_TCIA_261_1_t2_unbiased.nii.gz  Number of Slices:  125
DCS:  0.4203244339303819
0.12
Loading test set for subj
Subject  Brats17_TCIA_410_1_t2_unbiased.nii.gz  Number of Slices:  129
DCS:  0.2767606915377616
0.14
Loading test set for subj
Subject  Brats17_CBICA_ALX_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.25640664143413333
0.16
Loading test set for subj
Subject  Brats17_TCIA_390_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6468759284754799
0.18
Loading test set for subj
Subject  Brats17_TCIA_653_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6491752109144637
0.2
Loading test set for subj
Subject  Brats17_CBICA_AOP_1_t2_unbiased.nii.gz  Number of Slices:  146
DCS:  0.050769945871380805
0.22
Loading test set for subj
Subject  Brats17_CBICA_AWH_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.5185194749022785
0.24
Loading test set for subj
Subject  Brats17_TCIA_449_1_t2_unbiased.nii.gz  Number of Slices:  131
DCS:  0.07500036692938811
0.26
Loading test set for subj
Subject  Brats17_TCIA_460_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.5743564550450005
0.28
Loading test set for subj
Subject  Brats17_TCIA_401_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6976523369810336
0.3
Loading test set for subj
Subject  Brats17_TCIA_634_1_t2_unbiased.nii.gz  Number of Slices:  139
DCS:  0.536082675008825
0.32
Loading test set for subj
Subject  Brats17_TCIA_615_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.34472738464880914
0.34
Loading test set for subj
Subject  Brats17_TCIA_242_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.6507502985617114
0.36
Loading test set for subj
Subject  Brats17_TCIA_179_1_t2_unbiased.nii.gz  Number of Slices:  131
DCS:  0.46408383280653664
0.38
Loading test set for subj
Subject  Brats17_TCIA_298_1_t2_unbiased.nii.gz  Number of Slices:  132
DCS:  0.6950522189972961
0.4
Loading test set for subj
Subject  Brats17_TCIA_199_1_t2_unbiased.nii.gz  Number of Slices:  139
DCS:  0.638176311118568
0.42
Loading test set for subj
Subject  Brats17_2013_18_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6891782817544688
0.44
Loading test set for subj
Subject  Brats17_TCIA_168_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.5430451149326652
0.46
Loading test set for subj
Subject  Brats17_TCIA_103_1_t2_unbiased.nii.gz  Number of Slices:  128
DCS:  0.5675604562936313
0.48
Loading test set for subj
Subject  Brats17_TCIA_346_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.7646910164097336
0.5
Loading test set for subj
Subject  Brats17_TCIA_470_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.07389818927229246
0.52
Loading test set for subj
Subject  Brats17_CBICA_AXJ_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6973160872329662
0.54
Loading test set for subj
Subject  Brats17_2013_15_1_t2_unbiased.nii.gz  Number of Slices:  129
DCS:  0.20611118775003448
0.56
Loading test set for subj
Subject  Brats17_TCIA_491_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.4087932067519266
0.58
Loading test set for subj
Subject  Brats17_2013_29_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.6415787846518498
0.6
Loading test set for subj
Subject  Brats17_CBICA_AQG_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.5032649300950626
0.62
Loading test set for subj
Subject  Brats17_2013_0_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.3311352012095088
0.64
Loading test set for subj
Subject  Brats17_TCIA_205_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.6064457804095286
0.66
Loading test set for subj
Subject  Brats17_TCIA_177_1_t2_unbiased.nii.gz  Number of Slices:  124
DCS:  0.059515465099978335
0.68
Loading test set for subj
Subject  Brats17_TCIA_413_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.3134756984150803
0.7
Loading test set for subj
Subject  Brats17_CBICA_ASU_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.11511296193068171
0.72
Loading test set for subj
Subject  Brats17_TCIA_630_1_t2_unbiased.nii.gz  Number of Slices:  133
DCS:  0.5344323901743221
0.74
Loading test set for subj
Subject  Brats17_CBICA_ABO_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.3124062636068958
0.76
Loading test set for subj
Subject  Brats17_2013_13_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.13460895451554797
0.78
Loading test set for subj
Subject  Brats17_TCIA_607_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.5971950798942407
0.8
Loading test set for subj
Subject  Brats17_TCIA_402_1_t2_unbiased.nii.gz  Number of Slices:  142
DCS:  0.746173093730171
0.82
Loading test set for subj
Subject  Brats17_TCIA_131_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.34303039509829986
0.84
Loading test set for subj
Subject  Brats17_TCIA_374_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.43615979782757713
0.86
Loading test set for subj
Subject  Brats17_TCIA_603_1_t2_unbiased.nii.gz  Number of Slices:  147
DCS:  0.2737770047667676
0.88
Loading test set for subj
Subject  Brats17_TCIA_101_1_t2_unbiased.nii.gz  Number of Slices:  135
DCS:  0.025306940616386872
0.9
Loading test set for subj
Subject  Brats17_TCIA_448_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.4099499342752681
0.92
Loading test set for subj
Subject  Brats17_TCIA_621_1_t2_unbiased.nii.gz  Number of Slices:  145
DCS:  0.39544087902476355
0.94
Loading test set for subj
Subject  Brats17_TCIA_234_1_t2_unbiased.nii.gz  Number of Slices:  133
DCS:  0.5937161430119177
0.96
Loading test set for subj
Subject  Brats17_TCIA_130_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.15886400394747663
0.98
Loading test set for subj
Subject  Brats17_CBICA_AME_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.3633944931101127
All AUC:  0.8625540126755163
Mean All DCS:  0.4416088773619765
Std ALL DCS:  0.2071125652722902
Training Dice: 0.4770746806883674
Training Dice FPR5: 0.4576001912672922
Training Dice FPR1: 0.4784663572746653
[Brats17_TCIA_372_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_1e1_10steps_4fch3sh_iterAug_EX100_1_200
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Loading train set for subj
0.0 : 0.19638003515200184
0.01 : 0.5109577678398687
0.02 : 0.5609786322516686
0.03 : 0.5962536673437148
0.04 : 0.6174759823508584
0.05 : 0.6281344478036635
0.06 : 0.6310416592492855
0.07 : 0.6283744170552965
0.08 : 0.6220183861919288
0.09 : 0.6131682940598406
0.1 : 0.6021639824096505
0.11 : 0.5894254504390378
0.12 : 0.5746668189639609
0.13 : 0.5594397729700955
0.14 : 0.5433377539976525
0.15 : 0.5265212541826744
0.16 : 0.5090673065575706
0.17 : 0.4916130629389617
0.18 : 0.4718370989331927
0.19 : 0.4514055430563453
0.2 : 0.4291768923435158
0.21 : 0.40427028063670656
0.22 : 0.3758873875830907
0.23 : 0.3480107978935257
0.24 : 0.319290145722118
0.25 : 0.29009000734753865
0.26 : 0.26155118982513714
0.27 : 0.23373956689545028
0.28 : 0.2071952868456635
0.29 : 0.18442305997983377
0.3 : 0.16471997900647137
0.31 : 0.14527411012472521
0.32 : 0.12749922867215277
0.33 : 0.1114921762562391
0.34 : 0.09782262128832526
0.35 : 0.0858743257094934
0.36 : 0.07651080746375831
0.37 : 0.06710840790113644
0.38 : 0.05868291785967585
0.39 : 0.050869455113324615
0.4 : 0.04412699085055913
0.41 : 0.036844706895360395
0.42 : 0.03005232753516506
0.43 : 0.024342615627424232
0.44 : 0.019330719431020334
0.45 : 0.015189465197527546
0.46 : 0.01121296007065996
0.47 : 0.007747295729815759
0.48 : 0.004776338752640765
0.49 : 0.0021208334009619493
0.5 : 0.0004440160712158459
0.51 : 3.249566724436742e-05
AUC training :  0.8190033300978258  - Dice training :  0.6310416592492855
0 15232
1 6912
2 16864
3 3552
4 13280
5 7168
6 21408
7 10112
8 10368
9 19584
10 17056
11 1568
12 8832
13 17632
14 8512
15 3200
16 3584
17 4832
18 4544
19 21280
20 15264
21 14656
22 1792
23 13472
24 16672
25 4032
26 7776
27 6464
28 672
29 5728
30 10016
31 7296
32 21024
33 14464
34 19360
35 18752
36 20608
37 12064
38 19744
39 19488
40 18880
41 20704
42 1024
43 19136
44 10080
45 20640
46 7232
47 16608
48 12160
49 16128
0 2784
1 5472
2 13024
3 19008
4 10336
5 13440
6 14688
7 17856
8 2816
9 14560
10 3232
11 18016
12 9088
13 3072
14 3904
15 9056
16 3104
17 6880
18 2368
19 13568
20 9024
21 1408
22 1632
23 6368
24 15648
25 2528
26 19584
27 22016
28 7520
29 6752
30 21632
31 18720
32 4576
33 7264
34 21536
35 32
36 1312
37 2464
38 12608
39 16800
40 12704
41 16320
42 8960
43 4864
44 22592
45 23136
46 11488
47 10912
48 1120
49 22144
0.06 0.022095972555907804 0.027087364117620017
0.0
Loading test set for subj
Subject  Brats17_CBICA_AMH_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.5917920987181143
0.02
Loading test set for subj
Subject  Brats17_TCIA_645_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.0
0.04
Loading test set for subj
Subject  Brats17_2013_3_1_t2_unbiased.nii.gz  Number of Slices:  128
DCS:  0.2766850727878428
0.06
Loading test set for subj
Subject  Brats17_TCIA_331_1_t2_unbiased.nii.gz  Number of Slices:  123
DCS:  0.10729099050531944
0.08
Loading test set for subj
Subject  Brats17_TCIA_147_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.6841478935980654
0.1
Loading test set for subj
Subject  Brats17_TCIA_261_1_t2_unbiased.nii.gz  Number of Slices:  125
DCS:  0.2930403691127656
0.12
Loading test set for subj
Subject  Brats17_TCIA_410_1_t2_unbiased.nii.gz  Number of Slices:  129
DCS:  0.25845285771566323
0.14
Loading test set for subj
Subject  Brats17_CBICA_ALX_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.25535883482238086
0.16
Loading test set for subj
Subject  Brats17_TCIA_390_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.0069583405961303815
0.18
Loading test set for subj
Subject  Brats17_TCIA_653_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.5033037706143737
0.2
Loading test set for subj
Subject  Brats17_CBICA_AOP_1_t2_unbiased.nii.gz  Number of Slices:  146
DCS:  0.06813856109630757
0.22
Loading test set for subj
Subject  Brats17_CBICA_AWH_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.4560690489579606
0.24
Loading test set for subj
Subject  Brats17_TCIA_449_1_t2_unbiased.nii.gz  Number of Slices:  131
DCS:  0.016643694004135078
0.26
Loading test set for subj
Subject  Brats17_TCIA_460_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.5000310801384102
0.28
Loading test set for subj
Subject  Brats17_TCIA_401_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6695932491686231
0.3
Loading test set for subj
Subject  Brats17_TCIA_634_1_t2_unbiased.nii.gz  Number of Slices:  139
DCS:  0.0
0.32
Loading test set for subj
Subject  Brats17_TCIA_615_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.09947206424916936
0.34
Loading test set for subj
Subject  Brats17_TCIA_242_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.6339387081708516
0.36
Loading test set for subj
Subject  Brats17_TCIA_179_1_t2_unbiased.nii.gz  Number of Slices:  131
DCS:  0.17787387037216987
0.38
Loading test set for subj
Subject  Brats17_TCIA_298_1_t2_unbiased.nii.gz  Number of Slices:  132
DCS:  0.8085905914430022
0.4
Loading test set for subj
Subject  Brats17_TCIA_199_1_t2_unbiased.nii.gz  Number of Slices:  139
DCS:  0.6312130369038574
0.42
Loading test set for subj
Subject  Brats17_2013_18_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.7183100175430704
0.44
Loading test set for subj
Subject  Brats17_TCIA_168_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.715995688715117
0.46
Loading test set for subj
Subject  Brats17_TCIA_103_1_t2_unbiased.nii.gz  Number of Slices:  128
DCS:  0.0012867567684269614
0.48
Loading test set for subj
Subject  Brats17_TCIA_346_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.5050387126299372
0.5
Loading test set for subj
Subject  Brats17_TCIA_470_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.00043063725701292775
0.52
Loading test set for subj
Subject  Brats17_CBICA_AXJ_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.7698846490594266
0.54
Loading test set for subj
Subject  Brats17_2013_15_1_t2_unbiased.nii.gz  Number of Slices:  129
DCS:  0.14915990398902731
0.56
Loading test set for subj
Subject  Brats17_TCIA_491_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.1823344101771776
0.58
Loading test set for subj
Subject  Brats17_2013_29_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.48273632339989075
0.6
Loading test set for subj
Subject  Brats17_CBICA_AQG_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.30896465978031007
0.62
Loading test set for subj
Subject  Brats17_2013_0_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.399543989027236
0.64
Loading test set for subj
Subject  Brats17_TCIA_205_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.5261813139732344
0.66
Loading test set for subj
Subject  Brats17_TCIA_177_1_t2_unbiased.nii.gz  Number of Slices:  124
DCS:  0.07511233512103203
0.68
Loading test set for subj
Subject  Brats17_TCIA_413_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.16609236900072205
0.7
Loading test set for subj
Subject  Brats17_CBICA_ASU_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.23216611588929914
0.72
Loading test set for subj
Subject  Brats17_TCIA_630_1_t2_unbiased.nii.gz  Number of Slices:  133
DCS:  0.5156871536091423
0.74
Loading test set for subj
Subject  Brats17_CBICA_ABO_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.3018859646373796
0.76
Loading test set for subj
Subject  Brats17_2013_13_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.0
0.78
Loading test set for subj
Subject  Brats17_TCIA_607_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.4734188041084064
0.8
Loading test set for subj
Subject  Brats17_TCIA_402_1_t2_unbiased.nii.gz  Number of Slices:  142
DCS:  0.803024985376452
0.82
Loading test set for subj
Subject  Brats17_TCIA_131_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.002835997746741516
0.84
Loading test set for subj
Subject  Brats17_TCIA_374_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.29901832616291507
0.86
Loading test set for subj
Subject  Brats17_TCIA_603_1_t2_unbiased.nii.gz  Number of Slices:  147
DCS:  0.3774945854423185
0.88
Loading test set for subj
Subject  Brats17_TCIA_101_1_t2_unbiased.nii.gz  Number of Slices:  135
DCS:  0.03442760140252751
0.9
Loading test set for subj
Subject  Brats17_TCIA_448_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.16283392798249033
0.92
Loading test set for subj
Subject  Brats17_TCIA_621_1_t2_unbiased.nii.gz  Number of Slices:  145
DCS:  0.11488859144949216
0.94
Loading test set for subj
Subject  Brats17_TCIA_234_1_t2_unbiased.nii.gz  Number of Slices:  133
DCS:  0.5241836005972862
0.96
Loading test set for subj
Subject  Brats17_TCIA_130_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.13179158183191836
0.98
Loading test set for subj
Subject  Brats17_CBICA_AME_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.39972138616771785
All AUC:  0.6832079129500145
Mean All DCS:  0.3282608904364171
Std ALL DCS:  0.2502636875291846
Training Dice: 0.4184743922776695
Training Dice FPR5: 0.28862483178330406
Training Dice FPR1: 0.31518142422233175
[Brats17_TCIA_231_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_1e1_10steps_4fch3sh_iterAug_EX100_2_200
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Loading train set for subj
0.0 : 0.09822960350743422
0.01 : 0.4498994563193564
0.02 : 0.60942134581796
0.03 : 0.689209623610678
0.04 : 0.7380784590086914
0.05 : 0.7675986502765335
0.06 : 0.7876386687797147
0.07 : 0.8004895787641673
0.08 : 0.8081844764193278
0.09 : 0.8115184405803523
0.1 : 0.8101859859965254
0.11 : 0.8067827204307655
0.12 : 0.799545871630974
0.13 : 0.7892668190337607
0.14 : 0.7775901987266062
0.15 : 0.764763538348444
0.16 : 0.7502551973110917
0.17 : 0.7344158362419275
0.18 : 0.7171689482070348
0.19 : 0.6980438607187027
0.2 : 0.6772315137334147
0.21 : 0.6547128096376844
0.22 : 0.6307853557177794
0.23 : 0.6058431093287359
0.24 : 0.5791279253108068
0.25 : 0.5503423788993153
0.26 : 0.520115572382186
0.27 : 0.48706532038676675
0.28 : 0.4517192111547968
0.29 : 0.4144038284871921
0.3 : 0.37501094858544276
0.31 : 0.3320334011395947
0.32 : 0.28597496188848337
0.33 : 0.23939451456771377
0.34 : 0.1956450377503009
0.35 : 0.15825070426030952
0.36 : 0.12708228167592125
0.37 : 0.09991422023634246
0.38 : 0.07801390885426784
0.39 : 0.060076075448021654
0.4 : 0.04463826927891013
0.41 : 0.029345372460496615
0.42 : 0.01757877723307909
0.43 : 0.010536475508726776
0.44 : 0.007464790623363721
0.45 : 0.00620667418990811
0.46 : 0.004759215939340164
0.47 : 0.0034976794242281566
0.48 : 0.0024496608161946806
0.49 : 0.0017503702706341726
0.5 : 0.0010505899466623566
0.51 : 0.0005927762135072143
0.52 : 0.00021559565035775402
AUC training :  0.9569321048308796  - Dice training :  0.8115184405803523
0 13184
1 6144
2 17728
3 13088
4 17696
5 12544
6 10496
7 13408
8 5280
9 960
10 17472
11 13632
12 21536
13 640
14 17088
15 16960
16 10880
17 21088
18 16448
19 7424
20 3840
21 11136
22 21792
23 22816
24 16320
25 18080
26 10528
27 14048
28 15680
29 15296
30 11008
31 23424
Traceback (most recent call last):
  File "restore_MAP_NN.py", line 78, in <module>
    step_size=step_rate, renormalized=False)
  File "/scratch_net/biwidl214/jonatank/code_home/restor_MAP/utils/threshold.py", line 330, in compute_threshold
    dif_prob.extend(prob_map[mask == 1])
IndexError: boolean index did not match indexed array along dimension 0; dimension is 32 but corresponding boolean dimension is 17
[Brats17_CBICA_ASV_1_t2_unbiased.nii.gz]
 Vae model:  camcan_400_Aug_6_100  NN model:  1subj_1e1_10steps_4fch3sh_iterAug_EX100_4_200
Using device: cuda:0
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Down' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
/scratch_net/biwidl214/jonatank/anaconda3/envs/JKMT/lib/python3.7/site-packages/torch/serialization.py:593: SourceChangeWarning: source code of class 'networks.vae_bilinear_conv.ResBlock_Up' has changed. you can retrieve the original source code by accessing the object's source attribute or set `torch.nn.Module.dump_patches = True` and use the patch tool to revert the changes.
  warnings.warn(msg, SourceChangeWarning)
Loading train set for subj
0.0 : 0.11495661509553037
0.01 : 0.5656085297146665
0.02 : 0.7079518752969274
0.03 : 0.7700468241770025
0.04 : 0.8038386541770217
0.05 : 0.8226935576295026
0.06 : 0.8337859248878224
0.07 : 0.8394226470891647
0.08 : 0.839737789841574
0.09 : 0.8349958399239301
0.1 : 0.8267614920874152
0.11 : 0.8136889510055129
0.12 : 0.7974460127699362
0.13 : 0.7780754448691924
0.14 : 0.7556727448286108
0.15 : 0.728991998774932
0.16 : 0.6988292880988901
0.17 : 0.6657596688295077
0.18 : 0.6273753522099863
0.19 : 0.5822841558635633
0.2 : 0.5307403166223499
0.21 : 0.4722100508948734
0.22 : 0.41218866891706957
0.23 : 0.3546595021224235
0.24 : 0.30336681869069
0.25 : 0.25412663789235934
0.26 : 0.2036000605052186
0.27 : 0.15451444278106363
0.28 : 0.11347233024730077
0.29 : 0.07916272811656405
0.3 : 0.05296915599830802
0.31 : 0.032540042572495376
0.32 : 0.017389469612385383
0.33 : 0.008424956947940125
0.34 : 0.0033290244895790915
0.35 : 0.0013648247440953604
0.36 : 0.0007624045886118031
0.37 : 0.0004610583061427152
0.38 : 0.00010641694157709906
0.39 : 5.320988639689254e-05
0.4 : 3.5473572188719404e-05
0.41 : 3.5473572188719404e-05
0.42 : 1.773694339254516e-05
AUC training :  0.9931440445620727  - Dice training :  0.839737789841574
0 8864
1 20096
2 7456
3 5568
4 2112
5 928
6 20224
7 20480
8 21984
9 16736
10 22176
11 1760
12 13888
13 11136
14 17888
15 19680
16 8800
17 21824
18 4064
19 2944
20 17248
21 12384
22 11232
23 320
24 3520
25 1120
26 10432
27 7136
28 6944
29 12832
30 3264
31 4000
32 9984
33 15616
34 12672
35 6912
36 6272
37 16064
38 8224
39 18496
40 256
41 14752
42 1152
43 20640
44 10560
45 17312
46 2400
47 3360
48 19360
49 6656
0 5856
1 15168
2 4896
3 19424
4 3680
5 16992
6 21472
7 21760
8 7392
9 19520
10 2976
11 20192
12 7808
13 12384
14 14784
15 19840
16 9952
17 18912
18 16960
19 18016
20 8224
21 22336
22 2080
23 160
24 12448
25 12288
26 64
27 4480
28 4544
29 6240
30 19264
31 17632
32 15744
33 3872
34 15808
35 13056
36 2304
37 18560
38 4640
39 9888
40 21696
41 7680
42 15104
43 4160
44 18496
45 8544
46 21984
47 6048
48 19072
49 23136
0.08 0.02522929112425895 0.02750461395705089
0.0
Loading test set for subj
Subject  Brats17_CBICA_AMH_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.6838945159229857
0.02
Loading test set for subj
Subject  Brats17_TCIA_645_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.4044457855562261
0.04
Loading test set for subj
Subject  Brats17_2013_3_1_t2_unbiased.nii.gz  Number of Slices:  128
DCS:  0.5539116082015958
0.06
Loading test set for subj
Subject  Brats17_TCIA_331_1_t2_unbiased.nii.gz  Number of Slices:  123
DCS:  0.35743700258177397
0.08
Loading test set for subj
Subject  Brats17_TCIA_147_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.690225697287266
0.1
Loading test set for subj
Subject  Brats17_TCIA_261_1_t2_unbiased.nii.gz  Number of Slices:  125
DCS:  0.2230935764967943
0.12
Loading test set for subj
Subject  Brats17_TCIA_410_1_t2_unbiased.nii.gz  Number of Slices:  129
DCS:  0.2160204179120774
0.14
Loading test set for subj
Subject  Brats17_CBICA_ALX_1_t2_unbiased.nii.gz  Number of Slices:  137
DCS:  0.5530644302795051
0.16
Loading test set for subj
Subject  Brats17_TCIA_390_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.5219871903757956
0.18
Loading test set for subj
Subject  Brats17_TCIA_653_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.7529124174019327
0.2
Loading test set for subj
Subject  Brats17_CBICA_AOP_1_t2_unbiased.nii.gz  Number of Slices:  146
DCS:  0.13073226358230838
0.22
Loading test set for subj
Subject  Brats17_CBICA_AWH_1_t2_unbiased.nii.gz  Number of Slices:  130
DCS:  0.4120613857647598
0.24
Loading test set for subj
Subject  Brats17_TCIA_449_1_t2_unbiased.nii.gz  Number of Slices:  131
DCS:  0.4918940369147979
0.26
Loading test set for subj
Subject  Brats17_TCIA_460_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.5292288185814893
0.28
Loading test set for subj
Subject  Brats17_TCIA_401_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.6840993063429426
0.3
Loading test set for subj
Subject  Brats17_TCIA_634_1_t2_unbiased.nii.gz  Number of Slices:  139
DCS:  0.6278656548439745
0.32
Loading test set for subj
Subject  Brats17_TCIA_615_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.39103886022965456
0.34
Loading test set for subj
Subject  Brats17_TCIA_242_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.7266078219113443
0.36
Loading test set for subj
Subject  Brats17_TCIA_179_1_t2_unbiased.nii.gz  Number of Slices:  131
DCS:  0.4588470034917694
0.38
Loading test set for subj
Subject  Brats17_TCIA_298_1_t2_unbiased.nii.gz  Number of Slices:  132
DCS:  0.8189129552296395
0.4
Loading test set for subj
Subject  Brats17_TCIA_199_1_t2_unbiased.nii.gz  Number of Slices:  139
DCS:  0.814140131644893
0.42
Loading test set for subj
Subject  Brats17_2013_18_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.7401836902016539
0.44
Loading test set for subj
Subject  Brats17_TCIA_168_1_t2_unbiased.nii.gz  Number of Slices:  144
DCS:  0.6460780724816134
0.46
Loading test set for subj
Subject  Brats17_TCIA_103_1_t2_unbiased.nii.gz  Number of Slices:  128
DCS:  0.4594410744152375
0.48
Loading test set for subj
Subject  Brats17_TCIA_346_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.7839669660832481
0.5
Loading test set for subj
Subject  Brats17_TCIA_470_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.3212299040283636
0.52
Loading test set for subj
Subject  Brats17_CBICA_AXJ_1_t2_unbiased.nii.gz  Number of Slices:  138
DCS:  0.8055460840580356
0.54
Loading test set for subj
Subject  Brats17_2013_15_1_t2_unbiased.nii.gz  Number of Slices:  129
DCS:  0.3382373909549302
0.56
Loading test set for subj
Subject  Brats17_TCIA_491_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.5197418965835822
0.58
Loading test set for subj
Subject  Brats17_2013_29_1_t2_unbiased.nii.gz  Number of Slices:  134
DCS:  0.6421937729379533
0.6
Loading test set for subj
Subject  Brats17_CBICA_AQG_1_t2_unbiased.nii.gz  Number of Slices:  140
DCS:  0.29562433297758806
0.62
Loading test set for subj
Subject  Brats17_2013_0_1_t2_unbiased.nii.gz  Number of Slices:  127
DCS:  0.4509805240674089
0.64
Loading test set for subj
Subject  Brats17_TCIA_205_1_t2_unbiased.nii.gz  Number of Slices:  136
DCS:  0.5983015592499336
0.66
Loading test set for subj
Subject  Brats17_TCIA_177_1_t2_unbiased.nii.gz  Number of Slices:  124
